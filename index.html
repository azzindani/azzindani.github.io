<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Portfolio - Home</title>
    <link rel="icon" type="image/png" href="assets/page0.png" sizes="32x32">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation bar -->
    <div class="navbar">
        <div class="logo">
            <h2>Afza Azzidani</h2>
            <!-- <img src="assets/images.png" alt="Logo"> -->
        </div>
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="https://github.com/azzindani">My Github</a></li>
            <li><a href="aboutme.html">About Me</a></li>
            <!-- Other links here -->
        </ul>
    </div>

    <!-- Main Content Section with Prolog -->
    <div class="layout-container">
        <!-- Prolog Section on the Left -->
        <div class="prolog">
            <hr class="divider">
            <h2>A Personal Journey Through Code, Data, and Creativity üíªüìäü§ñ</h2>
            <p>Welcome to my corner of the web! This portfolio reflects my personal growth and passion for creating meaningful solutions through technology, data, and innovation. Every project here represents a chapter in my journey, where I explore the fascinating realms of <strong>data analytics</strong>, <strong>data science</strong>, <strong>machine learning</strong>, and <strong>artificial intelligence</strong>.</p>
            <hr class="divider">
        </div>
    </div>

     <!-- Main Content Area with Sidebar -->
    <div class="main-content-wrapper">
        <!-- Portfolio Section (Main Content) -->
        <div class="portfolio-main">
            <div class="layout-container">
                <div class="prolog">
                    <hr class="divider">
                    <h2>Projects üöÄ</h2>
                    <hr class="divider">
                </div>
            </div>

            <div class="layout-container2">
                <div class="content">
                    <section class="portfolio" id="portfolio-cards">
                        <!-- Portfolio cards will be dynamically generated here -->
                        <div id="loading">Loading projects...</div>
                    </section>
                </div>
            </div>
        </div>

        <!-- Sidebar for Repositories -->
        <div class="sidebar">
            <div class="sidebar-section">
                <hr class="divider">
                <h3>Open Source üêô</h3>
                <hr class="divider">
                <div class="repo-cards" id="repo-cards">
                    <!-- Repository cards will be dynamically generated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 All rights reserved.</p>
    </footer>

    <script>
        // Configuration
        const CONFIG = {
            username: 'azzindani', // Your GitHub username
            repoName: 'azzindani.github.io', // Your repository name (usually username.github.io for GitHub Pages)
            isLocal: window.location.protocol === 'file:' || 
                    window.location.hostname === 'localhost' || 
                    window.location.hostname === '127.0.0.1' ||
                    window.location.hostname.includes('192.168.'),
            fallbackMdFiles: ['page5.md', 'page8.md', 'page9.md', 'page10.md']
        };

        // Repository metadata (manually maintained list)
        const REPOSITORY_PROJECTS = [
            {
                url: 'https://github.com/azzindani/01_Data_Analytic',
                title: 'Data Analysis',
                description: 'Providing my data analytic projects that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page11.gif',
                date: '2024-01-15',
                tags: ['jupyter', 'colab', 'analytics']
            },
            {
                url: 'https://github.com/azzindani/01_Streamlit',
                title: 'Data Visualization with Streamlit',
                description: 'Providing my interactive dashboard project in purpose for web application deployment.',
                image: 'assets/page12.gif',
                date: '2024-01-15',
                tags: ['streamlit', 'dashboard', 'web-app']
            },
            {
                url: 'https://github.com/azzindani/01_Depth_EDA',
                title: 'Deep Exploratory Data Analysis',
                description: 'EDA (Exploratory Data Analysis) tools that actually will help you to do in-depth data exploration before you create some analytics.',
                image: 'assets/page13.gif',
                date: '2024-01-15',
                tags: ['eda', 'data-exploration', 'analytics']
            },
            {
                url: 'https://github.com/azzindani/02_Machine_Learning',
                title: 'Machine Learning',
                description: 'Providing my machine learning projects that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page14.gif',
                date: '2024-01-15',
                tags: ['machine-learning', 'jupyter', 'colab']
            },
            {
                url: 'https://github.com/azzindani/02_Deep_Learning_ANN',
                title: 'Deep Learning ANN',
                description: 'Providing my deep learning projects using ANN (Artificial Neural Network) model, that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page15.gif',
                date: '2024-01-15',
                tags: ['deep-learning', 'ann', 'neural-networks', 'colab']
            },
            {
                url: 'https://github.com/azzindani/02_Deep_Learning_NLP',
                title: 'Deep Learning NLP',
                description: 'Providing my deep learning projects using NLP (Natural Language Processing) model, that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page16.gif',
                date: '2024-01-15',
                tags: ['deep-learning', 'nlp', 'natural-language-processing', 'colab']
            },
            {
                url: 'https://github.com/azzindani/02_Data_Science',
                title: 'Data Science',
                description: 'Providing my mixed deep learning projects, that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page17.gif',
                date: '2024-01-15',
                tags: ['data-science', 'deep-learning', 'colab']
            }
        ];


        // Generate page list (page1.md to page50.md)
        function generatePageList() {
            const pageList = [];
            for (let i = 1; i <= 50; i++) {
                pageList.push(`page${i}.md`);
            }
            console.log('üìÑ Generated page list:', pageList);
            return pageList;
        }

        // Utility Functions
        const Utils = {
            formatDate(dateString) {
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                return new Date(dateString).toLocaleDateString('en-US', options);
            },

            parseMarkdownMetadata(content) {
                const yamlRegex = /^---\n([\s\S]*?)\n---/;
                const htmlCommentRegex = /^<!--\n([\s\S]*?)\n-->/;
                
                let metadata = {};
                let match = content.match(yamlRegex) || content.match(htmlCommentRegex);
                
                if (match) {
                    const metadataText = match[1];
                    const lines = metadataText.split('\n');
                    
                    lines.forEach(line => {
                        const [key, ...valueParts] = line.split(':');
                        if (key && valueParts.length > 0) {
                            let value = valueParts.join(':').trim();
                            
                            // Remove quotes
                            value = value.replace(/^["']|["']$/g, '');
                            
                            // Parse arrays (tags)
                            if (value.startsWith('[') && value.endsWith(']')) {
                                value = value.slice(1, -1).split(',').map(item => 
                                    item.trim().replace(/^["']|["']$/g, '')
                                );
                            } else if (key.trim() === 'tags' && value.includes(',')) {
                                value = value.split(',').map(item => item.trim());
                            }
                            
                            // Parse booleans
                            if (value === 'true') value = true;
                            if (value === 'false') value = false;
                            
                            metadata[key.trim()] = value;
                        }
                    });
                }
                
                return metadata;
            },

            extractTitleFromContent(content) {
                const titleMatch = content.match(/^#\s+(.+)$/m);
                return titleMatch ? titleMatch[1].trim() : null;
            },

            extractDescriptionFromContent(content) {
                const contentWithoutYaml = content.replace(/^---[\s\S]*?---\n/, '');
                const lines = contentWithoutYaml.split('\n').filter(line => line.trim());
                const descLine = lines.find(line => !line.startsWith('#') && line.length > 20);
                return descLine ? descLine.substring(0, 150) + '...' : null;
            },

            extractDateFromFilename(filename) {
                const dateMatch = filename.match(/(\d{4}-\d{2}-\d{2})/);
                return dateMatch ? dateMatch[1] : null;
            },

            createProjectObject(filename, content, metadata) {
                return {
                    filename: filename.replace('.md', '.html'),
                    title: metadata.title || this.extractTitleFromContent(content) || `Project ${filename.replace('.md', '')}`,
                    description: metadata.description || this.extractDescriptionFromContent(content) || 'No description available',
                    image: metadata.image || `assets/${filename.replace('.md', '.png')}`,
                    date: metadata.date || this.extractDateFromFilename(filename) || new Date().toISOString().split('T')[0],
                    tags: metadata.tags || [],
                    featured: metadata.featured || false,
                    category: metadata.category || 'general',
                    originalFile: filename
                };
            }
        };

        // Check if file exists by trying to fetch it
        async function checkFileExists(filename) {
            try {
                const response = await fetch(`docs/${filename}`, { method: 'HEAD' });
                return response.ok;
            } catch (error) {
                return false;
            }
        }

        // Load content from existing file
        async function loadFileContent(filename) {
            try {
                const response = await fetch(`docs/${filename}`);
                if (response.ok) {
                    return await response.text();
                }
                return null;
            } catch (error) {
                console.warn(`‚ùå Error loading ${filename}:`, error);
                return null;
            }
        }

        // Portfolio Loader
        async function loadPortfolioProjects() {
            const portfolioContainer = document.getElementById('portfolio-cards');
            const loadingDiv = document.getElementById('loading');
            const projects = [];
            
            console.log('üîç Starting to load projects...');
            console.log('üåê Environment:', CONFIG.isLocal ? 'Local' : 'GitHub Pages');
            
            // Generate list of pages to check
            const pageList = generatePageList();
            let foundFiles = 0;
            let checkedFiles = 0;
            
            try {
                // Check each page file
                for (const filename of pageList) {
                    checkedFiles++;
                    console.log(`üìÑ Checking file ${checkedFiles}/50: ${filename}`);
                    
                    // Check if file exists
                    const exists = await checkFileExists(filename);
                    
                    if (exists) {
                        foundFiles++;
                        console.log(`‚úÖ Found file: ${filename}`);
                        
                        // Load file content
                        const content = await loadFileContent(filename);
                        
                        if (content) {
                            const metadata = Utils.parseMarkdownMetadata(content);
                            const project = Utils.createProjectObject(filename, content, metadata);
                            projects.push(project);
                            console.log(`‚ú® Added project: ${project.title}`);
                        }
                    } else {
                        console.log(`‚è≠Ô∏è File not found: ${filename}`);
                    }
                }
                
                console.log(`üìä Summary: Found ${foundFiles} files out of ${checkedFiles} checked`);
                
                // If no files found, try fallback
                if (projects.length === 0) {
                    console.warn('üîÑ No files found, trying fallback files...');
                    
                    for (const filename of CONFIG.fallbackMdFiles) {
                        const exists = await checkFileExists(filename);
                        if (exists) {
                            const content = await loadFileContent(filename);
                            if (content) {
                                const metadata = Utils.parseMarkdownMetadata(content);
                                const project = Utils.createProjectObject(filename, content, metadata);
                                projects.push(project);
                                console.log(`üìã Added fallback project: ${project.title}`);
                            }
                        }
                    }
                }
                
                // Sort projects (featured first, then by date)
                projects.sort((a, b) => {
                    if (a.featured && !b.featured) return -1;
                    if (!a.featured && b.featured) return 1;
                    return new Date(b.date) - new Date(a.date);
                });
                
                // Clear loading message
                loadingDiv.style.display = 'none';
                
                // Render projects
                if (projects.length > 0) {
                    projects.forEach((project, index) => {
                        const card = document.createElement('div');
                        card.className = 'card';
                        if (project.featured) card.classList.add('featured');
                        
                        const linkUrl = CONFIG.isLocal ? 
                            `docs/${project.filename}` : 
                            `https://${CONFIG.username}.github.io/${CONFIG.repoName}/docs/${project.filename}`;
                        
                        card.innerHTML = `
                            <a href="${linkUrl}">
                                <img src="${project.image}" alt="${project.title}" onerror="this.src='assets/default.png'">
                                <h3>${project.title} ${project.featured ? '‚≠ê' : ''}</h3>
                                <p>${project.description}</p>
                                <div class="project-meta">
                                    <span class="project-date">${Utils.formatDate(project.date)}</span>
                                    <div class="project-tags">
                                        ${project.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                    </div>
                                    <div class="project-source">
                                        <span class="source-file">üìÑ ${project.originalFile}</span>
                                    </div>
                                </div>
                            </a>
                        `;
                        
                        portfolioContainer.appendChild(card);
                    });
                    
                    console.log(`‚úÖ Successfully rendered ${projects.length} project cards`);
                } else {
                    loadingDiv.innerHTML = 'No projects found in the docs folder.';
                    console.warn('‚ö†Ô∏è No projects to display');
                }
                
            } catch (error) {
                console.error('üí• Error loading portfolio projects:', error);
                loadingDiv.innerHTML = 'Error loading projects. Please check the console for details.';
            }
        }

        // Repository Loader
        async function loadRepositoryProjects() {
            const repoContainer = document.getElementById('repo-cards');
            const repoLoadingDiv = document.getElementById('repo-loading');
            
            try {
                console.log('üêô Loading repository projects...');
                
                // Sort repositories by date (newest first)
                const sortedRepos = [...REPOSITORY_PROJECTS].sort((a, b) => 
                    new Date(b.date) - new Date(a.date)
                );
                
                // Clear loading message
                if (repoLoadingDiv) {
                    repoLoadingDiv.style.display = 'none';
                }
                
                // Generate cards for each repository
                sortedRepos.forEach(repo => {
                    const card = document.createElement('div');
                    card.className = 'sidebar-card';
                    
                    card.innerHTML = `
                        <a href="${repo.url}" target="_blank" rel="noopener noreferrer">
                            <img src="${repo.image}" alt="${repo.title}" onerror="this.src='assets/default.png'">
                            <div class="card-content">
                                <h4>${repo.title}</h4>
                                <p>${repo.description}</p>
                                <div class="project-meta">
                                    <span class="project-date">${Utils.formatDate(repo.date)}</span>
                                    <div class="project-tags">
                                        ${repo.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                    </div>
                                </div>
                            </div>
                        </a>
                    `;
                    
                    repoContainer.appendChild(card);
                });
                
                console.log(`‚úÖ Successfully loaded ${sortedRepos.length} repositories`);
                
            } catch (error) {
                console.error('üí• Error loading repository projects:', error);
                if (repoLoadingDiv) {
                    repoLoadingDiv.innerHTML = 'Error loading repositories. Please refresh the page.';
                }
            }
        }

        // Search functionality (optional)
        function addSearchFunctionality() {
            const searchInput = document.createElement('input');
            searchInput.type = 'text';
            searchInput.placeholder = 'Search projects...';
            searchInput.className = 'search-input';
            
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const cards = document.querySelectorAll('.card');
                
                cards.forEach(card => {
                    const title = card.querySelector('h3').textContent.toLowerCase();
                    const description = card.querySelector('p').textContent.toLowerCase();
                    
                    if (title.includes(searchTerm) || description.includes(searchTerm)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
            
            // Insert search input before portfolio section
            const portfolioSection = document.querySelector('.portfolio-main');
            portfolioSection.insertBefore(searchInput, portfolioSection.firstChild);
        }

        // Initialize everything when the DOM is loaded
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('üöÄ Initializing portfolio...');
            console.log('‚öôÔ∏è Configuration:', CONFIG);
            
            // Load both portfolio projects and repositories in parallel
            await Promise.all([
                loadPortfolioProjects(),
                loadRepositoryProjects()
            ]);
            
            console.log('üéâ Portfolio initialization complete!');
            
            // Uncomment to add search functionality
            // addSearchFunctionality();
        });
    </script>
</body>
</html>
