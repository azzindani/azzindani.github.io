<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portfolio showcasing data analytics, machine learning, and AI projects">
    <meta name="keywords" content="data science, machine learning, AI, portfolio, projects">
    <meta name="author" content="Your Name">
    <title>My Portfolio - Home</title>
    <link rel="icon" type="image/png" href="assets/page0.png" sizes="32x32">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="floating-background">
        <div class="floating-shape floating-circle size-medium float-1"></div>
        <div class="floating-shape floating-square size-small float-2"></div>
        <div class="floating-shape floating-triangle size-large float-3"></div>
        <div class="floating-shape floating-hexagon size-medium float-4"></div>
        <div class="floating-shape floating-circle size-small float-5"></div>
        <div class="floating-shape floating-square size-large float-6"></div>
        <div class="floating-shape floating-triangle size-medium float-7"></div>
        <div class="floating-shape floating-hexagon size-small float-8"></div>
        <div class="floating-shape floating-circle size-extra-large float-9"></div>
        <div class="floating-shape floating-square size-medium float-10"></div>
        <div class="floating-shape floating-triangle size-small float-11"></div>
        <div class="floating-shape floating-hexagon size-large float-12"></div>
    </div>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Navigation bar -->
    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="navbar-container">
            <div class="logo">
                <h1>
                    <a href="/" aria-label="Portfolio Home">
                        <span class="logo-text">My Name</span>
                        <!-- <img src="assets/images.png" alt="Portfolio Logo"> -->
                    </a>
                </h1>
            </div>
            
            <!-- Mobile menu toggle -->
            <button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>

            <ul class="nav-links" role="menubar">
                <li role="none"><a href="/" role="menuitem" aria-current="page">Home</a></li>
                <li role="none"><a href="https://github.com/azzindani" role="menuitem" target="_blank" rel="noopener noreferrer">My Github</a></li>
                <li role="none"><a href="aboutme.html" role="menuitem">About Me</a></li>
                <li role="none"><a href="#contact" role="menuitem">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero-section" id="main-content">
        <div class="hero-container">
            <div class="hero-content">
                <div class="hero-text">
                    <h1 class="hero-title">
                        <span class="gradient-text">Data Science & AI Portfolio</span>
                    </h1>
                    <p class="hero-subtitle">
                        A Personal Journey Through Code, Data, and Creativity 
                        <span class="hero-icons">üíªüìäü§ñ</span>
                    </p>
                    <p class="hero-description">
                        Welcome to my corner of the web! This portfolio reflects my personal growth and passion for creating meaningful solutions through technology, data, and innovation. Every project here represents a chapter in my journey, where I explore the fascinating realms of 
                        <strong>data analytics</strong>, <strong>data science</strong>, <strong>machine learning</strong>, and <strong>artificial intelligence</strong>.
                    </p>
                    <div class="hero-cta">
                        <a href="#portfolio" class="btn btn-primary">View Projects</a>
                        <a href="#repositories" class="btn btn-secondary">Open Source</a>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="hero-image-placeholder">
                        <!-- Animated background or profile image will go here -->
                        <div class="floating-elements">
                            <div class="floating-element">‚ö°</div>
                            <div class="floating-element">üöÄ</div>
                            <div class="floating-element">üí°</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Stats Section -->
    <section class="stats-section" aria-label="Portfolio statistics">
        <div class="stats-container">
            <div class="stat-item">
                <span class="stat-number" data-count="0">0</span>
                <span class="stat-label">Projects</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" data-count="0">0</span>
                <span class="stat-label">Repositories</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" data-count="2024">2024</span>
                <span class="stat-label">Year Started</span>
            </div>
        </div>
    </section>

    <!-- Filter and Search Section -->
    <section class="filter-section">
        <div class="filter-container">
            <div class="search-wrapper">
                <input type="text" id="search-input" class="search-input" placeholder="Search projects..." aria-label="Search projects">
                <span class="search-icon">üîç</span>
            </div>
            <div class="filter-wrapper">
                <label for="category-filter" class="filter-label">Filter by category:</label>
                <select id="category-filter" class="category-filter" aria-label="Filter projects by category">
                    <option value="all">All Categories</option>
                    <option value="data-analytics">Data Analytics</option>
                    <option value="machine-learning">Machine Learning</option>
                    <option value="web-development">Web Development</option>
                    <option value="visualization">Data Visualization</option>
                </select>
            </div>
            <div class="view-toggle">
                <button class="view-btn active" data-view="grid" aria-label="Grid view">
                    <span class="grid-icon">‚äû</span>
                </button>
                <button class="view-btn" data-view="list" aria-label="List view">
                    <span class="list-icon">‚ò∞</span>
                </button>
            </div>
        </div>
    </section>

    <!-- Main Content Area -->
    <main class="main-content-wrapper">
        <!-- Portfolio Section -->
        <section class="portfolio-section" id="portfolio" aria-label="Portfolio projects">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">üöÄ</span>
                    Featured Projects
                </h2>
                <p class="section-subtitle">Explore my latest work in data science and AI</p>
            </div>

            <div class="portfolio-container">
                <div class="portfolio-grid" id="portfolio-cards" role="list">
                    <!-- Loading state -->
                    <div class="loading-container" id="loading">
                        <div class="loading-spinner"></div>
                        <p class="loading-text">Loading amazing projects...</p>
                    </div>
                </div>
            </div>

            <!-- Load more button -->
            <div class="load-more-container">
                <button class="btn btn-outline" id="load-more-btn" style="display: none;">
                    Load More Projects
                </button>
            </div>
        </section>

        <!-- Sidebar for Repositories -->
        <aside class="sidebar" id="repositories" aria-label="Open source repositories">
            <div class="sidebar-header">
                <h3 class="sidebar-title">
                    <span class="section-icon">üêô</span>
                    Open Source
                </h3>
                <p class="sidebar-subtitle">Check out my GitHub repositories</p>
            </div>
            
            <div class="repo-container">
                <div class="repo-cards" id="repo-cards" role="list">
                    <!-- Loading state -->
                    <div class="loading-container" id="repo-loading">
                        <div class="loading-spinner small"></div>
                        <p class="loading-text">Loading repositories...</p>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <a href="https://github.com/username" class="btn btn-outline btn-small" target="_blank" rel="noopener noreferrer">
                    View All on GitHub
                </a>
            </div>
        </aside>
    </main>

    <!-- Back to top button -->
    <button class="back-to-top" id="back-to-top" aria-label="Back to top" style="display: none;">
        <span class="arrow-up">‚Üë</span>
    </button>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Connect</h4>
                    <div class="social-links">
                        <a href="https://github.com/username" aria-label="GitHub" target="_blank" rel="noopener noreferrer">GitHub</a>
                        <a href="https://huggingface.co/username" aria-label="Email">Hugging Face</a>
                        <a href="https://www.linkedin.com/in/username/" aria-label="LinkedIn" target="_blank" rel="noopener noreferrer">LinkedIn</a>
                        <a href="mailto:username@gmail.com" aria-label="Email">Email</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <nav class="footer-nav">
                        <a href="/">Home</a>
                        <a href="aboutme.html">About</a>
                        <a href="https://github.com/username?tab=repositories">Open Source</a>
                    </nav>
                </div>
                <div class="footer-section">
                    <h4>Technologies</h4>
                    <div class="tech-tags">
                        <span class="tech-tag">Python</span>
                        <span class="tech-tag">Artificial intelligence</span>
                        <span class="tech-tag">Machine Learning</span>
                        <span class="tech-tag">Data Science</span>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 username's Portfolio. All rights reserved. Built with ‚ù§Ô∏è and lots of ‚òï</p>
                <p class="footer-note">Last updated: <span id="last-updated"></span></p>
            </div>
        </div>
    </footer>

    <script>
        // Configuration
        const CONFIG = {
            username: 'username', // Replace with your GitHub username
            repoName: 'username.github.io', // Replace with your repository name
            docsFolder: 'docs', // Folder containing your .md files
            isLocal: window.location.protocol === 'file:' || 
                    window.location.hostname === 'localhost' || 
                    window.location.hostname === '127.0.0.1' ||
                    window.location.hostname.includes('192.168.'),
            fallbackMdFiles: ['page5.md', 'page8.md', 'page9.md', 'page10.md'],
            projectsPerPage: 6 // For pagination
        };

        // Repository metadata (manually maintained list)
        const REPOSITORY_PROJECTS = [
            {
                url: 'https://github.com/username/01_Data_Analytic',
                title: 'Data Analysis',
                description: 'Providing my data analytic projects that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page11.gif',
                date: '2024-01-15',
                tags: ['jupyter', 'colab', 'analytics']
            },
            {
                url: 'https://github.com/username/01_Streamlit',
                title: 'Data Visualization with Streamlit',
                description: 'Providing my interactive dashboard project in purpose for web application deployment.',
                image: 'assets/page12.gif',
                date: '2024-01-15',
                tags: ['streamlit', 'dashboard', 'web-app']
            },
            {
                url: 'https://github.com/username/01_Depth_EDA',
                title: 'Deep Exploratory Data Analysis',
                description: 'EDA (Exploratory Data Analysis) tools that actually will help you to do in-depth data exploration before you create some analytics.',
                image: 'assets/page13.gif',
                date: '2024-01-15',
                tags: ['eda', 'data-exploration', 'analytics']
            },
            {
                url: 'https://github.com/username/02_Machine_Learning',
                title: 'Machine Learning',
                description: 'Providing my machine learning projects that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page14.gif',
                date: '2024-01-15',
                tags: ['machine-learning', 'jupyter', 'colab']
            },
            {
                url: 'https://github.com/username/02_Deep_Learning_ANN',
                title: 'Deep Learning ANN',
                description: 'Providing my deep learning projects using ANN (Artificial Neural Network) model, that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page15.gif',
                date: '2024-01-15',
                tags: ['deep-learning', 'ann', 'neural-networks', 'colab']
            },
            {
                url: 'https://github.com/username/02_Deep_Learning_NLP',
                title: 'Deep Learning NLP',
                description: 'Providing my deep learning projects using NLP (Natural Language Processing) model, that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page16.gif',
                date: '2024-01-15',
                tags: ['deep-learning', 'nlp', 'natural-language-processing', 'colab']
            },
            {
                url: 'https://github.com/username/02_Data_Science',
                title: 'Data Science',
                description: 'Providing my mixed deep learning projects, that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page17.gif',
                date: '2024-01-15',
                tags: ['data-science', 'deep-learning', 'colab']
            }
        ];

        // Global variables
        let allProjects = [];
        let filteredProjects = [];
        let displayedProjects = 0;

        // Utility Functions
        const Utils = {
            formatDate(dateString) {
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                return new Date(dateString).toLocaleDateString('en-US', options);
            },

            parseMarkdownMetadata(content) {
                const yamlRegex = /^---\n([\s\S]*?)\n---/;
                const htmlCommentRegex = /^<!--\n([\s\S]*?)\n-->/;
                
                let metadata = {};
                let match = content.match(yamlRegex) || content.match(htmlCommentRegex);
                
                if (match) {
                    const metadataText = match[1];
                    const lines = metadataText.split('\n');
                    
                    lines.forEach(line => {
                        const [key, ...valueParts] = line.split(':');
                        if (key && valueParts.length > 0) {
                            let value = valueParts.join(':').trim();
                            
                            // Remove quotes
                            value = value.replace(/^["']|["']$/g, '');
                            
                            // Parse arrays (tags)
                            if (value.startsWith('[') && value.endsWith(']')) {
                                value = value.slice(1, -1).split(',').map(item => 
                                    item.trim().replace(/^["']|["']$/g, '')
                                );
                            } else if (key.trim() === 'tags' && value.includes(',')) {
                                value = value.split(',').map(item => item.trim());
                            }
                            
                            // Parse booleans
                            if (value === 'true') value = true;
                            if (value === 'false') value = false;
                            
                            metadata[key.trim()] = value;
                        }
                    });
                }
                
                return metadata;
            },

            extractTitleFromContent(content) {
                const titleMatch = content.match(/^#\s+(.+)$/m);
                return titleMatch ? titleMatch[1].trim() : null;
            },

            extractDescriptionFromContent(content) {
                const contentWithoutYaml = content.replace(/^---[\s\S]*?---\n/, '');
                const lines = contentWithoutYaml.split('\n').filter(line => line.trim());
                const descLine = lines.find(line => !line.startsWith('#') && line.length > 20);
                return descLine ? descLine.substring(0, 150) + '...' : null;
            },

            extractDateFromFilename(filename) {
                const dateMatch = filename.match(/(\d{4}-\d{2}-\d{2})/);
                return dateMatch ? dateMatch[1] : null;
            },

            createProjectObject(filename, content, metadata) {
                return {
                    filename: filename.replace('.md', '.html'),
                    title: metadata.title || this.extractTitleFromContent(content) || `Project ${filename.replace('.md', '')}`,
                    description: metadata.description || this.extractDescriptionFromContent(content) || 'No description available',
                    image: metadata.image || `assets/${filename.replace('.md', '.png')}`,
                    date: metadata.date || this.extractDateFromFilename(filename) || new Date().toISOString().split('T')[0],
                    tags: metadata.tags || [],
                    featured: metadata.featured || false,
                    category: metadata.category || 'general',
                    originalFile: filename
                };
            },

            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            },

            animateValue(element, start, end, duration) {
                const range = end - start;
                const startTime = performance.now();
                
                const animate = (currentTime) => {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const current = Math.floor(start + (range * progress));
                    
                    element.textContent = current;
                    
                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    }
                };
                
                requestAnimationFrame(animate);
            }
        };

        // Create project card HTML
        function createProjectCard(project, index) {
            const linkUrl = CONFIG.isLocal ? 
                `docs/${project.filename}` : 
                `https://${CONFIG.username}.github.io/${CONFIG.docsFolder}/${project.filename}`;
            
            return `
                <article class="project-card ${project.featured ? 'featured' : ''}" role="listitem" data-category="${project.category}" style="animation-delay: ${index * 0.1}s">
                    <a href="${linkUrl}" class="card-link" aria-label="View ${project.title} project">
                        <div class="card-image-container">
                            <img src="${project.image}" alt="${project.title}" class="card-image" loading="lazy" onerror="this.src='assets/default.png'">
                            <div class="card-overlay">
                                <span class="view-project">View Project ‚Üí</span>
                            </div>
                            ${project.featured ? '<div class="featured-badge">‚≠ê Featured</div>' : ''}
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">${project.title}</h3>
                            <p class="card-description">${project.description}</p>
                            <div class="card-meta">
                                <div class="card-date">
                                    <span class="date-icon">üìÖ</span>
                                    <time datetime="${project.date}">${Utils.formatDate(project.date)}</time>
                                </div>
                                <div class="card-tags">
                                    ${project.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                </div>
                            </div>
                            <div class="card-footer">
                                <span class="source-file">üìÑ ${project.originalFile}</span>
                            </div>
                        </div>
                    </a>
                </article>
            `;
        }

        // Create repository card HTML
        function createRepositoryCard(repo, index) {
            return `
                <article class="repo-card" role="listitem" style="animation-delay: ${index * 0.1}s">
                    <a href="${repo.url}" target="_blank" rel="noopener noreferrer" class="repo-link" aria-label="View ${repo.title} repository on GitHub">
                        <div class="repo-image-container">
                            <img src="${repo.image}" alt="${repo.title}" class="repo-image" loading="lazy" onerror="this.src='assets/default.png'">
                            <div class="repo-overlay">
                                <span class="view-repo">View on GitHub ‚Üí</span>
                            </div>
                        </div>
                        <div class="repo-content">
                            <h4 class="repo-title">${repo.title}</h4>
                            <p class="repo-description">${repo.description}</p>
                            <div class="repo-meta">
                                <div class="repo-date">
                                    <time datetime="${repo.date}">${Utils.formatDate(repo.date)}</time>
                                </div>
                                <div class="repo-tags">
                                    ${repo.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                </div>
                            </div>
                        </div>
                    </a>
                </article>
            `;
        }

        // GitHub API Functions (same as original)
        async function fetchGitHubRepoContents(username, repoName, path = '') {
            const apiUrl = `https://api.github.com/repos/${username}/${repoName}/contents/${path}`;
            
            try {
                console.log(`üîç Fetching GitHub repo contents from: ${apiUrl}`);
                const response = await fetch(apiUrl);
                
                if (!response.ok) {
                    throw new Error(`GitHub API error: ${response.status} ${response.statusText}`);
                }
                
                const data = await response.json();
                console.log(`‚úÖ Successfully fetched ${data.length} items from GitHub`);
                return data;
            } catch (error) {
                console.error('‚ùå Error fetching GitHub repo contents:', error);
                return [];
            }
        }

        async function fetchFileContent(username, repoName, filePath) {
            const apiUrl = `https://api.github.com/repos/${username}/${repoName}/contents/${filePath}`;
            
            try {
                const response = await fetch(apiUrl);
                
                if (!response.ok) {
                    console.warn(`‚ö†Ô∏è Could not fetch ${filePath}: ${response.status}`);
                    return null;
                }
                
                const data = await response.json();
                
                // Decode base64 content
                if (data.content && data.encoding === 'base64') {
                    const decodedContent = atob(data.content);
                    return decodedContent;
                }
                
                return null;
            } catch (error) {
                console.warn(`‚ùå Error fetching file content for ${filePath}:`, error);
                return null;
            }
        }

        // Local file checking (same as original)
        async function checkLocalFile(filename) {
            try {
                const response = await fetch(`docs/${filename}`, { method: 'HEAD' });
                return response.ok;
            } catch (error) {
                return false;
            }
        }

        async function loadLocalFileContent(filename) {
            try {
                const response = await fetch(`docs/${filename}`);
                if (response.ok) {
                    return await response.text();
                }
                return null;
            } catch (error) {
                console.warn(`‚ùå Error loading local file ${filename}:`, error);
                return null;
            }
        }

        // Enhanced Portfolio Loader
        async function loadPortfolioProjects() {
            const portfolioContainer = document.getElementById('portfolio-cards');
            const loadingDiv = document.getElementById('loading');
            const projects = [];
            
            console.log('üöÄ Starting to load projects...');
            console.log('üåê Environment:', CONFIG.isLocal ? 'Local' : 'GitHub Pages');
            console.log('‚öôÔ∏è Configuration:', CONFIG);
            
            try {
                let mdFiles = [];
                
                if (CONFIG.isLocal) {
                    // Local development - check for files manually
                    console.log('üè† Local mode: Checking for files manually...');
                    
                    // Generate list of pages to check (page1.md to page50.md)
                    const pageList = [];
                    for (let i = 1; i <= 50; i++) {
                        pageList.push(`page${i}.md`);
                    }
                    
                    for (const filename of pageList) {
                        const exists = await checkLocalFile(filename);
                        if (exists) {
                            mdFiles.push({ name: filename, type: 'file' });
                            console.log(`‚úÖ Found local file: ${filename}`);
                        }
                    }
                    
                    // Try fallback files if none found
                    if (mdFiles.length === 0) {
                        for (const filename of CONFIG.fallbackMdFiles) {
                            const exists = await checkLocalFile(filename);
                            if (exists) {
                                mdFiles.push({ name: filename, type: 'file' });
                                console.log(`üìã Found fallback file: ${filename}`);
                            }
                        }
                    }
                } else {
                    // GitHub Pages - use GitHub API
                    console.log('üêô GitHub mode: Fetching files from repository...');
                    
                    const repoContents = await fetchGitHubRepoContents(CONFIG.username, CONFIG.repoName, CONFIG.docsFolder);
                    
                    // Filter for .md files
                    mdFiles = repoContents.filter(file => 
                        file.type === 'file' && 
                        file.name.endsWith('.md')
                    );
                    
                    console.log(`üìÑ Found ${mdFiles.length} .md files in GitHub repository`);
                }
                
                // Process each .md file
                for (const file of mdFiles) {
                    console.log(`üìñ Processing file: ${file.name}`);
                    
                    let content = null;
                    
                    if (CONFIG.isLocal) {
                        content = await loadLocalFileContent(file.name);
                    } else {
                        content = await fetchFileContent(CONFIG.username, CONFIG.repoName, `${CONFIG.docsFolder}/${file.name}`);
                    }
                    
                    if (content) {
                        const metadata = Utils.parseMarkdownMetadata(content);
                        const project = Utils.createProjectObject(file.name, content, metadata);
                        projects.push(project);
                        console.log(`‚ú® Added project: ${project.title}`);
                    } else {
                        console.warn(`‚ö†Ô∏è Could not load content for: ${file.name}`);
                    }
                }
                
                console.log(`üìä Summary: Successfully processed ${projects.length} projects`);
                
                // Store projects globally
                allProjects = projects;
                filteredProjects = [...projects];
                
                // Sort projects (featured first, then by date)
                filteredProjects.sort((a, b) => {
                    if (a.featured && !b.featured) return -1;
                    if (!a.featured && b.featured) return 1;
                    return new Date(b.date) - new Date(a.date);
                });
                
                // Update stats
                updateStats();
                
                // Clear loading message and render projects
                loadingDiv.style.display = 'none';
                renderProjects();
                
            } catch (error) {
                console.error('üí• Error loading portfolio projects:', error);
                loadingDiv.innerHTML = `
                    <div class="error-container">
                        <div class="error-icon">‚ö†Ô∏è</div>
                        <h3>Error loading projects</h3>
                        <p>There was an error loading your projects. Please check:</p>
                        <ul>
                            <li>Your GitHub username and repository name in CONFIG</li>
                            <li>That your repository is public</li>
                            <li>That you have .md files in the docs/ folder</li>
                        </ul>
                        <button class="btn btn-primary" onclick="location.reload()">Retry</button>
                        <p class="error-note">Check the browser console for more details.</p>
                    </div>
                `;
            }
        }

        // Enhanced Repository Loader
        async function loadRepositoryProjects() {
            const repoContainer = document.getElementById('repo-cards');
            const repoLoadingDiv = document.getElementById('repo-loading');
            
            try {
                console.log('üêô Loading repository projects...');
                
                // Sort repositories by date (newest first)
                const sortedRepos = [...REPOSITORY_PROJECTS].sort((a, b) => 
                    new Date(b.date) - new Date(a.date)
                );
                
                // Clear loading message
                if (repoLoadingDiv) {
                    repoLoadingDiv.style.display = 'none';
                }
                
                // Generate cards for each repository
                sortedRepos.forEach((repo, index) => {
                    const cardElement = document.createElement('div');
                    cardElement.innerHTML = createRepositoryCard(repo, index);
                    repoContainer.appendChild(cardElement.firstElementChild);
                });
                
                console.log(`‚úÖ Successfully loaded ${sortedRepos.length} repositories`);
                
            } catch (error) {
                console.error('üí• Error loading repository projects:', error);
                if (repoLoadingDiv) {
                    repoLoadingDiv.innerHTML = `
                        <div class="error-container small">
                            <p>Error loading repositories.</p>
                            <button class="btn btn-small" onclick="loadRepositoryProjects()">Retry</button>
                        </div>
                    `;
                }
            }
        }

        // Render projects with pagination
        function renderProjects(append = false) {
            const portfolioContainer = document.getElementById('portfolio-cards');
            const loadMoreBtn = document.getElementById('load-more-btn');
            
            if (!append) {
                portfolioContainer.innerHTML = '';
                displayedProjects = 0;
            }
            
            const projectsToShow = filteredProjects.slice(displayedProjects, displayedProjects + CONFIG.projectsPerPage);
            
            if (projectsToShow.length === 0 && displayedProjects === 0) {
                portfolioContainer.innerHTML = `
                    <div class="no-results">
                        <div class="no-results-icon">üîç</div>
                        <h3>No projects found</h3>
                        <p>Try adjusting your search or filter criteria.</p>
                    </div>
                `;
                loadMoreBtn.style.display = 'none';
                return;
            }
            
            projectsToShow.forEach((project, index) => {
                const cardElement = document.createElement('div');
                cardElement.innerHTML = createProjectCard(project, displayedProjects + index);
                portfolioContainer.appendChild(cardElement.firstElementChild);
            });
            
            displayedProjects += projectsToShow.length;
            
            // Show/hide load more button
            if (displayedProjects >= filteredProjects.length) {
                loadMoreBtn.style.display = 'none';
            } else {
                loadMoreBtn.style.display = 'block';
            }
        }

        // Update statistics
        function updateStats() {
            const projectCount = document.querySelector('[data-count="0"]');
            const repoCount = document.querySelectorAll('[data-count="0"]')[1];
            
            if (projectCount) {
                Utils.animateValue(projectCount, 0, allProjects.length, 1000);
            }
            if (repoCount) {
                Utils.animateValue(repoCount, 0, REPOSITORY_PROJECTS.length, 1000);
            }
        }

        // Search and filter functionality
        function initializeSearchAndFilter() {
            const searchInput = document.getElementById('search-input');
            const categoryFilter = document.getElementById('category-filter');
            const viewToggle = document.querySelectorAll('.view-btn');
            const loadMoreBtn = document.getElementById('load-more-btn');
            const portfolioGrid = document.getElementById('portfolio-cards');

            // Debounced search function
            const debouncedSearch = Utils.debounce(() => {
                const searchTerm = searchInput.value.toLowerCase();
                const selectedCategory = categoryFilter.value;
                
                filteredProjects = allProjects.filter(project => {
                    const matchesSearch = project.title.toLowerCase().includes(searchTerm) ||
                                        project.description.toLowerCase().includes(searchTerm) ||
                                        project.tags.some(tag => tag.toLowerCase().includes(searchTerm));
                    
                    const matchesCategory = selectedCategory === 'all' || project.category === selectedCategory;
                    
                    return matchesSearch && matchesCategory;
                });
                
                renderProjects();
            }, 300);

            // Search input event listener
            if (searchInput) {
                searchInput.addEventListener('input', debouncedSearch);
            }

            // Category filter event listener
            if (categoryFilter) {
                categoryFilter.addEventListener('change', debouncedSearch);
            }

            // View toggle functionality
            viewToggle.forEach(btn => {
                btn.addEventListener('click', () => {
                    viewToggle.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    const view = btn.dataset.view;
                    portfolioGrid.className = view === 'list' ? 'portfolio-list' : 'portfolio-grid';
                });
            });

            // Load more functionality
            if (loadMoreBtn) {
                loadMoreBtn.addEventListener('click', () => {
                    renderProjects(true);
                });
            }
        }

        // Mobile menu functionality
        function initializeMobileMenu() {
            const mobileToggle = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            
            if (mobileToggle && navLinks) {
                mobileToggle.addEventListener('click', () => {
                    const isExpanded = mobileToggle.getAttribute('aria-expanded') === 'true';
                    mobileToggle.setAttribute('aria-expanded', !isExpanded);
                    navLinks.classList.toggle('active');
                    document.body.classList.toggle('menu-open');
                });

                // Close menu when clicking outside
                document.addEventListener('click', (e) => {
                    if (!mobileToggle.contains(e.target) && !navLinks.contains(e.target)) {
                        mobileToggle.setAttribute('aria-expanded', 'false');
                        navLinks.classList.remove('active');
                        document.body.classList.remove('menu-open');
                    }
                });

                // Close menu on escape key
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        mobileToggle.setAttribute('aria-expanded', 'false');
                        navLinks.classList.remove('active');
                        document.body.classList.remove('menu-open');
                    }
                });
            }
        }

        // Back to top functionality
        function initializeBackToTop() {
            const backToTopBtn = document.getElementById('back-to-top');
            
            if (backToTopBtn) {
                // Show/hide based on scroll position
                window.addEventListener('scroll', () => {
                    if (window.pageYOffset > 300) {
                        backToTopBtn.style.display = 'block';
                    } else {
                        backToTopBtn.style.display = 'none';
                    }
                });

                // Smooth scroll to top
                backToTopBtn.addEventListener('click', () => {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }
        }

        // Smooth scrolling for anchor links
        function initializeSmoothScrolling() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        }

        // Intersection Observer for animations
        function initializeAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            });

            // Observe elements that should animate
            document.querySelectorAll('.project-card, .repo-card, .stat-item').forEach(el => {
                observer.observe(el);
            });
        }

        // Lazy loading for images
        function initializeLazyLoading() {
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.dataset.src || img.src;
                            img.classList.remove('lazy');
                            observer.unobserve(img);
                        }
                    });
                });

                document.querySelectorAll('img[loading="lazy"]').forEach(img => {
                    imageObserver.observe(img);
                });
            }
        }

        // Theme toggle functionality (optional)
        function initializeThemeToggle() {
            const themeToggle = document.getElementById('theme-toggle');
            
            if (themeToggle) {
                // Check for saved theme preference or default to 'light'
                const currentTheme = localStorage.getItem('theme') || 'light';
                document.documentElement.setAttribute('data-theme', currentTheme);
                
                themeToggle.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                });
            }
        }

        // Error handling and retry functionality
        function handleErrors() {
            window.addEventListener('error', (e) => {
                console.error('Global error:', e.error);
            });

            window.addEventListener('unhandledrejection', (e) => {
                console.error('Unhandled promise rejection:', e.reason);
            });
        }

        // Update last updated timestamp
        function updateLastUpdated() {
            const lastUpdatedElement = document.getElementById('last-updated');
            if (lastUpdatedElement) {
                lastUpdatedElement.textContent = new Date().toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            }
        }

        // Performance monitoring
        function initializePerformanceMonitoring() {
            // Monitor loading performance
            window.addEventListener('load', () => {
                const loadTime = performance.now();
                console.log(`üöÄ Page loaded in ${Math.round(loadTime)}ms`);
                
                // Log performance metrics
                if ('connection' in navigator) {
                    console.log(`üì° Connection: ${navigator.connection.effectiveType}`);
                }
            });
        }

        // Accessibility enhancements
        function initializeAccessibility() {
            // Skip link functionality
            const skipLink = document.querySelector('.skip-link');
            if (skipLink) {
                skipLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    const target = document.querySelector(skipLink.getAttribute('href'));
                    if (target) {
                        target.focus();
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }

            // Keyboard navigation for cards
            document.querySelectorAll('.project-card, .repo-card').forEach(card => {
                card.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const link = card.querySelector('a');
                        if (link) link.click();
                    }
                });
            });

            // Announce dynamic content changes to screen readers
            const announcer = document.createElement('div');
            announcer.setAttribute('aria-live', 'polite');
            announcer.setAttribute('aria-atomic', 'true');
            announcer.className = 'sr-only';
            document.body.appendChild(announcer);
            
            window.announceToScreenReader = (message) => {
                announcer.textContent = message;
                setTimeout(() => announcer.textContent = '', 1000);
            };
        }

        // Initialize everything when the DOM is loaded
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('üöÄ Initializing enhanced portfolio...');
            console.log('‚öôÔ∏è Configuration:', CONFIG);
            
            // Initialize UI components
            initializeMobileMenu();
            initializeBackToTop();
            initializeSmoothScrolling();
            initializeAccessibility();
            initializePerformanceMonitoring();
            handleErrors();
            updateLastUpdated();
            
            try {
                // Load content in parallel
                await Promise.all([
                    loadPortfolioProjects(),
                    loadRepositoryProjects()
                ]);
                
                // Initialize features that depend on loaded content
                initializeSearchAndFilter();
                initializeAnimations();
                initializeLazyLoading();
                
                console.log('üéâ Enhanced portfolio initialization complete!');
                
                // Announce to screen readers
                if (window.announceToScreenReader) {
                    window.announceToScreenReader(`Portfolio loaded with ${allProjects.length} projects`);
                }
                
            } catch (error) {
                console.error('üí• Error during initialization:', error);
            }
        });

        // Service Worker registration (optional, for PWA features)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
