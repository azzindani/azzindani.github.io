<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Portfolio - Home</title>
    <link rel="icon" type="image/png" href="assets/page0.png" sizes="32x32">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation bar -->
    <div class="navbar">
        <div class="logo">
            <h2>Afza Azzidani</h2>
            <!-- <img src="assets/images.png" alt="Logo"> -->
        </div>
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="https://github.com/azzindani">My Github</a></li>
            <li><a href="aboutme.html">About Me</a></li>
            <!-- Other links here -->
        </ul>
    </div>

    <!-- Main Content Section with Prolog -->
    <div class="layout-container">
        <!-- Prolog Section on the Left -->
        <div class="prolog">
            <hr class="divider">
            <h2>A Personal Journey Through Code, Data, and Creativity üíªüìäü§ñ</h2>
            <p>Welcome to my corner of the web! This portfolio reflects my personal growth and passion for creating meaningful solutions through technology, data, and innovation. Every project here represents a chapter in my journey, where I explore the fascinating realms of <strong>data analytics</strong>, <strong>data science</strong>, <strong>machine learning</strong>, and <strong>artificial intelligence</strong>.</p>
            <hr class="divider">
        </div>
    </div>

     <!-- Main Content Area with Sidebar -->
    <div class="main-content-wrapper">
        <!-- Portfolio Section (Main Content) -->
        <div class="portfolio-main">
            <div class="layout-container">
                <div class="prolog">
                    <hr class="divider">
                    <h2>Projects üöÄ</h2>
                    <hr class="divider">
                </div>
            </div>

            <div class="layout-container2">
                <div class="content">
                    <section class="portfolio" id="portfolio-cards">
                        <!-- Portfolio cards will be dynamically generated here -->
                        <div id="loading">Loading projects...</div>
                    </section>
                </div>
            </div>
        </div>

        <!-- Sidebar for Repositories -->
        <div class="sidebar">
            <div class="sidebar-section">
                <hr class="divider">
                <h3>Open Source üêô</h3>
                <hr class="divider">
                <div class="repo-cards" id="repo-cards">
                    <!-- Repository cards will be dynamically generated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 All rights reserved.</p>
    </footer>

    <script>
        // Configuration
        const CONFIG = {
            username: 'azzindani', // Your GitHub username
            repoName: 'azzindani.github.io', // Your repository name (usually username.github.io for GitHub Pages)
            isLocal: window.location.protocol === 'file:' || 
                    window.location.hostname === 'localhost' || 
                    window.location.hostname === '127.0.0.1' ||
                    window.location.hostname.includes('192.168.'),
            fallbackMdFiles: ['page5.md', 'page8.md', 'page9.md', 'page10.md']
        };

        // Repository metadata (manually maintained list)
        const REPOSITORY_PROJECTS = [
            {
                url: 'https://github.com/azzindani/01_Data_Analytic',
                title: 'Data Analysis',
                description: 'Providing my data analytic projects that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page11.gif',
                date: '2024-01-15',
                tags: ['jupyter', 'colab', 'analytics']
            },
            {
                url: 'https://github.com/azzindani/01_Streamlit',
                title: 'Data Visualization with Streamlit',
                description: 'Providing my interactive dashboard project in purpose for web application deployment.',
                image: 'assets/page12.gif',
                date: '2024-01-15',
                tags: ['streamlit', 'dashboard', 'web-app']
            },
            {
                url: 'https://github.com/azzindani/01_Depth_EDA',
                title: 'Deep Exploratory Data Analysis',
                description: 'EDA (Exploratory Data Analysis) tools that actually will help you to do in-depth data exploration before you create some analytics.',
                image: 'assets/page13.gif',
                date: '2024-01-15',
                tags: ['eda', 'data-exploration', 'analytics']
            },
            {
                url: 'https://github.com/azzindani/02_Machine_Learning',
                title: 'Machine Learning',
                description: 'Providing my machine learning projects that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page14.gif',
                date: '2024-01-15',
                tags: ['machine-learning', 'jupyter', 'colab']
            },
            {
                url: 'https://github.com/azzindani/02_Deep_Learning_ANN',
                title: 'Deep Learning ANN',
                description: 'Providing my deep learning projects using ANN (Artificial Neural Network) model, that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page15.gif',
                date: '2024-01-15',
                tags: ['deep-learning', 'ann', 'neural-networks', 'colab']
            },
            {
                url: 'https://github.com/azzindani/02_Deep_Learning_NLP',
                title: 'Deep Learning NLP',
                description: 'Providing my deep learning projects using NLP (Natural Language Processing) model, that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page16.gif',
                date: '2024-01-15',
                tags: ['deep-learning', 'nlp', 'natural-language-processing', 'colab']
            },
            {
                url: 'https://github.com/azzindani/02_Data_Science',
                title: 'Data Science',
                description: 'Providing my mixed deep learning projects, that I created in single notebook and can be run directly via google colab.',
                image: 'assets/page17.gif',
                date: '2024-01-15',
                tags: ['data-science', 'deep-learning', 'colab']
            }
        ];


        // Utility Functions
        const Utils = {
            formatDate(dateString) {
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                return new Date(dateString).toLocaleDateString('en-US', options);
            },

            parseMarkdownMetadata(content) {
                const yamlRegex = /^---\n([\s\S]*?)\n---/;
                const htmlCommentRegex = /^<!--\n([\s\S]*?)\n-->/;
                
                let metadata = {};
                let match = content.match(yamlRegex) || content.match(htmlCommentRegex);
                
                if (match) {
                    const metadataText = match[1];
                    const lines = metadataText.split('\n');
                    
                    lines.forEach(line => {
                        const [key, ...valueParts] = line.split(':');
                        if (key && valueParts.length > 0) {
                            let value = valueParts.join(':').trim();
                            
                            // Remove quotes
                            value = value.replace(/^["']|["']$/g, '');
                            
                            // Parse arrays (tags)
                            if (value.startsWith('[') && value.endsWith(']')) {
                                value = value.slice(1, -1).split(',').map(item => 
                                    item.trim().replace(/^["']|["']$/g, '')
                                );
                            } else if (key.trim() === 'tags' && value.includes(',')) {
                                value = value.split(',').map(item => item.trim());
                            }
                            
                            // Parse booleans
                            if (value === 'true') value = true;
                            if (value === 'false') value = false;
                            
                            metadata[key.trim()] = value;
                        }
                    });
                }
                
                return metadata;
            },

            extractTitleFromContent(content) {
                const titleMatch = content.match(/^#\s+(.+)$/m);
                return titleMatch ? titleMatch[1].trim() : null;
            },

            extractDescriptionFromContent(content) {
                const contentWithoutYaml = content.replace(/^---[\s\S]*?---\n/, '');
                const lines = contentWithoutYaml.split('\n').filter(line => line.trim());
                const descLine = lines.find(line => !line.startsWith('#') && line.length > 20);
                return descLine ? descLine.substring(0, 150) + '...' : null;
            },

            extractDateFromFilename(filename) {
                const dateMatch = filename.match(/(\d{4}-\d{2}-\d{2})/);
                return dateMatch ? dateMatch[1] : null;
            }
        };

        // File Detection
        class FileDetector {
            static async detectMdFiles() {
                const detectedFiles = [];
                
                try {
                    console.log('üîç Auto-detecting .md files...');
                    
                    if (CONFIG.isLocal) {
                        await this._detectLocalFiles(detectedFiles);
                    } else {
                        await this._detectRemoteFiles(detectedFiles);
                    }
                    
                    const uniqueFiles = [...new Set(detectedFiles)].sort();
                    console.log(`üéØ Auto-detected ${uniqueFiles.length} .md files:`, uniqueFiles);
                    
                    return uniqueFiles.length > 0 ? uniqueFiles : CONFIG.fallbackMdFiles;
                    
                } catch (error) {
                    console.warn('‚ö†Ô∏è Auto-detection failed:', error);
                    return CONFIG.fallbackMdFiles;
                }
            }

            static async _detectLocalFiles(detectedFiles) {
                const commonPatterns = [
                    ...Array.from({length: 50}, (_, i) => `page${i + 1}.md`),
                    'index.md', 'readme.md', 'about.md', 'project.md',
                    'automation.md', 'facial-recognition.md', 'data-analysis.md',
                    'web-scraping.md', 'machine-learning.md', 'ai-project.md',
                    'dashboard.md', 'visualization.md', 'neural-network.md',
                    'deep-learning.md', 'computer-vision.md', 'nlp.md',
                    'recommendation.md', 'clustering.md', 'classification.md'
                ];
                
                console.log('üìÅ Scanning for .md files locally...');
                
                for (const filename of commonPatterns) {
                    try {
                        const response = await fetch(`docs/${filename}`, { method: 'HEAD' });
                        if (response.ok) {
                            detectedFiles.push(filename);
                            console.log(`‚úÖ Found: ${filename}`);
                        }
                    } catch (error) {
                        // File doesn't exist, continue silently
                    }
                }
            }

            static async _detectRemoteFiles(detectedFiles) {
                try {
                    // Try directory listing
                    const response = await fetch('docs/');
                    if (response.ok) {
                        const html = await response.text();
                        const matches = html.match(/href="([^"]*\.md)"/g);
                        if (matches) {
                            matches.forEach(match => {
                                const filename = match.match(/href="([^"]*)"/)[1];
                                if (filename.endsWith('.md') && !filename.includes('/')) {
                                    detectedFiles.push(filename);
                                }
                            });
                        }
                    }
                } catch (error) {
                    console.log('üìÇ Directory listing not available, trying GitHub API...');
                    await this._tryGitHubAPI(detectedFiles);
                }
            }

            static async _tryGitHubAPI(detectedFiles) {
                try {
                    const apiUrl = `https://api.github.com/repos/${CONFIG.username}/${CONFIG.repoName}/contents/docs`;
                    
                    const apiResponse = await fetch(apiUrl);
                    if (apiResponse.ok) {
                        const files = await apiResponse.json();
                        files.forEach(file => {
                            if (file.name.endsWith('.md') && file.type === 'file') {
                                detectedFiles.push(file.name);
                                console.log(`üêô GitHub API found: ${file.name}`);
                            }
                        });
                    }
                } catch (apiError) {
                    console.log('üîÑ GitHub API not accessible, using fallback method...');
                }
            }
        }

        // Portfolio Loader
        class PortfolioLoader {
            static async loadProjects() {
                const portfolioContainer = document.getElementById('portfolio-cards');
                const loadingDiv = document.getElementById('loading');
                const projects = [];
                
                console.log('üîç Starting to load projects...');
                
                const mdFiles = await FileDetector.detectMdFiles();
                console.log('üìã Files to process:', mdFiles);
                
                try {
                    await this._processFiles(mdFiles, projects);
                    
                    if (projects.length === 0) {
                        console.warn('üîÑ No .md files loaded, using fallback data');
                        projects.push(...this._getFallbackProjects());
                    }
                    
                    this._sortProjects(projects);
                    loadingDiv.style.display = 'none';
                    this._renderProjects(projects, portfolioContainer);
                    
                    console.log('‚úÖ Portfolio loading complete!');
                    this._showDetectionSummary(mdFiles, projects);
                    
                } catch (error) {
                    console.error('üí• Error loading portfolio projects:', error);
                    this._handleError(loadingDiv, portfolioContainer);
                }
            }

            static async _processFiles(mdFiles, projects) {
                for (const filename of mdFiles) {
                    try {
                        console.log(`üìÑ Attempting to load: docs/${filename}`);
                        
                        const response = await fetch(`docs/${filename}`);
                        if (response.ok) {
                            const content = await response.text();
                            const metadata = Utils.parseMarkdownMetadata(content);
                            
                            // Skip files without proper metadata
                            if (!metadata.title && content.length < 100) {
                                console.log(`‚è≠Ô∏è Skipping ${filename} - insufficient metadata or content`);
                                continue;
                            }
                            
                            const project = this._createProjectObject(filename, content, metadata);
                            projects.push(project);
                            console.log(`‚ú® Added project: ${project.title}`);
                        }
                    } catch (error) {
                        console.warn(`‚ùå Error loading ${filename}:`, error);
                    }
                }
            }

            static _createProjectObject(filename, content, metadata) {
                return {
                    filename: filename.replace('.md', '.html'),
                    title: metadata.title || Utils.extractTitleFromContent(content) || 'Untitled Project',
                    description: metadata.description || Utils.extractDescriptionFromContent(content) || 'No description available',
                    image: metadata.image || 'assets/default.png',
                    date: metadata.date || Utils.extractDateFromFilename(filename) || new Date().toISOString().split('T')[0],
                    tags: metadata.tags || [],
                    featured: metadata.featured || false,
                    category: metadata.category || 'general',
                    originalFile: filename
                };
            }

            static _sortProjects(projects) {
                projects.sort((a, b) => {
                    if (a.featured && !b.featured) return -1;
                    if (!a.featured && b.featured) return 1;
                    return new Date(b.date) - new Date(a.date);
                });
            }

            static _renderProjects(projects, container) {
                projects.forEach((project, index) => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    if (project.featured) card.classList.add('featured');
                    
                    const linkUrl = CONFIG.isLocal ? 
                        `docs/${project.filename}` : 
                        `https://${CONFIG.username}.github.io/${CONFIG.repoName}/docs/${project.filename}`;
                    
                    card.innerHTML = `
                        <a href="${linkUrl}">
                            <img src="${project.image}" alt="${project.title}" onerror="this.src='assets/default.png'">
                            <h3>${project.title} ${project.featured ? '‚≠ê' : ''}</h3>
                            <p>${project.description}</p>
                            <div class="project-meta">
                                <span class="project-date">${Utils.formatDate(project.date)}</span>
                                <div class="project-tags">
                                    ${project.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                </div>
                                <div class="project-source">
                                    <span class="source-file">üìÑ ${project.originalFile}</span>
                                </div>
                            </div>
                        </a>
                    `;
                    
                    container.appendChild(card);
                });
            }

            static _getFallbackProjects() {
                return [
                    {
                        filename: 'page10.html',
                        title: 'Broker Transaction Automation System',
                        description: 'Integration of robust multi-threaded web scraping process, data management and interactive visualization',
                        image: 'assets/page10.png',
                        date: '2024-01-15',
                        tags: ['automation', 'data-analysis', 'web-scraping'],
                        featured: true
                    },
                    {
                        filename: 'page5.html',
                        title: 'Facial Recognition - Large Version',
                        description: 'Over 500 thousands of facial images collected using multi-threaded process with 97% accuracy',
                        image: 'assets/page5.png',
                        date: '2024-01-10',
                        tags: ['machine-learning', 'computer-vision', 'ai']
                    }
                ];
            }

            static _handleError(loadingDiv, container) {
                loadingDiv.innerHTML = 'Error loading projects. Please check the console for details.';
                
                const fallbackProjects = this._getFallbackProjects();
                fallbackProjects.forEach(project => {
                    const card = document.createElement('div');
                    card.className = 'card fallback';
                    card.innerHTML = `
                        <a href="#" onclick="alert('This is a fallback project card')">
                            <img src="${project.image}" alt="${project.title}">
                            <h3>${project.title} (Fallback)</h3>
                            <p>${project.description}</p>
                        </a>
                    `;
                    container.appendChild(card);
                });
            }

            static _showDetectionSummary(detectedFiles, loadedProjects) {
                console.log('\nüìä DETECTION SUMMARY:');
                console.log(`üîç Files detected: ${detectedFiles.length}`);
                console.log(`‚úÖ Projects loaded: ${loadedProjects.length}`);
                console.log(`üìÇ Detected files:`, detectedFiles);
                console.log(`üéØ Loaded projects:`, loadedProjects.map(p => p.originalFile));
                
                const skippedFiles = detectedFiles.filter(file => 
                    !loadedProjects.some(project => project.originalFile === file)
                );
                if (skippedFiles.length > 0) {
                    console.log(`‚è≠Ô∏è Skipped files:`, skippedFiles);
                }
            }
        }

        // Repository Loader
        class RepositoryLoader {
            static async loadRepositories() {
                const repoContainer = document.getElementById('repo-cards');
                const repoLoadingDiv = document.getElementById('repo-loading');
                
                try {
                    console.log('üêô Loading repository projects...');
                    
                    // Sort repositories by date (newest first)
                    const sortedRepos = [...REPOSITORY_PROJECTS].sort((a, b) => 
                        new Date(b.date) - new Date(a.date)
                    );
                    
                    // Clear loading message
                    if (repoLoadingDiv) {
                        repoLoadingDiv.style.display = 'none';
                    }
                    
                    // Generate cards for each repository
                    sortedRepos.forEach(repo => {
                        const card = document.createElement('div');
                        card.className = 'sidebar-card';
                        
                        card.innerHTML = `
                            <a href="${repo.url}" target="_blank" rel="noopener noreferrer">
                                <img src="${repo.image}" alt="${repo.title}" onerror="this.src='assets/default.png'">
                                <div class="card-content">
                                    <h4>${repo.title}</h4>
                                    <p>${repo.description}</p>
                                    <div class="project-meta">
                                        <span class="project-date">${Utils.formatDate(repo.date)}</span>
                                        <div class="project-tags">
                                            ${repo.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                        </div>
                                    </div>
                                </div>
                            </a>
                        `;
                        
                        repoContainer.appendChild(card);
                    });
                    
                    console.log(`‚úÖ Successfully loaded ${sortedRepos.length} repositories`);
                    
                } catch (error) {
                    console.error('üí• Error loading repository projects:', error);
                    if (repoLoadingDiv) {
                        repoLoadingDiv.innerHTML = 'Error loading repositories. Please refresh the page.';
                    }
                }
            }
        }

        // Search Functionality (Optional)
        class SearchManager {
            static initialize() {
                const searchInput = document.createElement('input');
                searchInput.type = 'text';
                searchInput.placeholder = 'Search projects...';
                searchInput.className = 'search-input';
                
                searchInput.addEventListener('input', this._handleSearch);
                
                const portfolioSection = document.querySelector('.portfolio-main');
                portfolioSection.insertBefore(searchInput, portfolioSection.firstChild);
            }

            static _handleSearch(e) {
                const searchTerm = e.target.value.toLowerCase();
                const cards = document.querySelectorAll('.card');
                
                cards.forEach(card => {
                    const title = card.querySelector('h3').textContent.toLowerCase();
                    const description = card.querySelector('p').textContent.toLowerCase();
                    
                    if (title.includes(searchTerm) || description.includes(searchTerm)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            }
        }

        // Initialize everything when the DOM is loaded
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('üöÄ Initializing portfolio...');
            
            // Load both portfolio projects and repositories in parallel
            await Promise.all([
                PortfolioLoader.loadProjects(),
                RepositoryLoader.loadRepositories()
            ]);
            
            console.log('üéâ Portfolio initialization complete!');
            
            // Uncomment to add search functionality
            // SearchManager.initialize();
        });
    </script>
</body>
</html>
